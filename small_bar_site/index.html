
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Piccolo Bar</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>小酒馆 / Piccolo Bar</h1>
    <p id="hours">营业时间读取中...</p>
    <div>
      <button onclick="setLang('zh')">中文</button>
      <button onclick="setLang('it')">Italiano</button>
      <input id="search" placeholder="搜索 Search" />
    </div>
  </header>

  <section id="slider">
    <h2>广告栏</h2>
    <div id="carousel"></div>
  </section>

  <section id="highlights">
    <h2 id="new">新品</h2>
    <div>...</div>
    <h2 id="discount">折扣</h2>
    <div>...</div>
  </section>

  <nav>
    <a href="menu.html">菜单 / Menù</a>
  </nav>

  <footer>
    <p id="address">地址：Via Roma 1, Milano</p>
    <p>电话：123-456789</p>
  </footer>

<script>
  function setLang(lang) {
    if (lang === 'zh') {
      document.querySelector('h1').innerText = '小酒馆';
      document.getElementById('hours').innerText = '营业时间读取中...';
      document.getElementById('new').innerText = '新品';
      document.getElementById('discount').innerText = '折扣';
      document.getElementById('address').innerText = '地址：Via Roma 1, Milano';
    } else {
      document.querySelector('h1').innerText = 'Piccolo Bar';
      document.getElementById('hours').innerText = 'Orario di apertura...';
      document.getElementById('new').innerText = 'Novità';
      document.getElementById('discount').innerText = 'Sconti';
      document.getElementById('address').innerText = 'Indirizzo: Via Roma 1, Milano';
    }
  }

  fetch("../data/opening_hours.json")
    .then(r => r.json())
    .then(data => { document.getElementById('hours').innerText = "营业时间 / Orario: " + data; });

  fetch("../uploads/")
    .then(r => r.text())
    .then(text => {
      const div = document.getElementById("carousel");
      const matches = [...text.matchAll(/href="(.*?)"/g)].map(m => m[1]).filter(f => /\.(jpg|png|jpeg|gif)$/i.test(f));
      matches.forEach(file => {
        const img = document.createElement("img");
        img.src = "../uploads/" + file;
        img.style = "max-height:100px; margin:5px;";
        div.appendChild(img);
      });
    });
</script>
</body>
</html>
